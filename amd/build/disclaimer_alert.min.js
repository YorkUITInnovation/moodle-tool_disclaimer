define("tool_disclaimer/disclaimer_alert",["exports","core/notification","core/modal_factory","core/templates","core/ajax","core/config"],(function(_exports,_notification,_modal_factory,_templates,_ajax,_config){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_modal_factory=_interopRequireDefault(_modal_factory),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_config=_interopRequireDefault(_config);function respond(disclaimerid,userid,response){_ajax.default.call([{methodname:"tool_disclaimer_response",args:{userid:userid,disclaimerid:disclaimerid,response:response}}])[0].done((function(){})).fail((function(){_notification.default.alert("Could not save response")}))}_exports.init=async data=>{let params={subject:data.subject,message:data.message,disclaimerid:data.id,userid:data.userid};const modal=await _modal_factory.default.create({title:data.subject,body:_templates.default.render("tool_disclaimer/modal_buttons",params),footer:"Nothing"});modal.show(),document.querySelector('[data-action="hide"]').addEventListener("click",(()=>{respond(data.id,data.userid,null),data.redirectto&&(window.location.href=_config.default.wwwroot+data.redirectto)})),document.getElementById("btn-tool-disclaimer-cancel").addEventListener("click",(()=>{respond(data.id,data.userid,null),modal.hide(),data.redirectto&&(window.location.href=_config.default.wwwroot+data.redirectto)})),document.getElementById("btn-tool-disclaimer-yes").addEventListener("click",(()=>{respond(data.id,data.userid,1),modal.hide()})),document.getElementById("btn-tool-disclaimer-no").addEventListener("click",(()=>{respond(data.id,data.userid,0),modal.hide(),data.redirectto&&(window.location.href=_config.default.wwwroot+data.redirectto)}))}}));

//# sourceMappingURL=disclaimer_alert.min.js.map